# oldtsDaily-report
oldtsDaily-report
團隊日報管理系統 - 版本更新歷程

v7.0 - 強大控制台與彈性合併機制

更新日期: 2025-12-11

本次改版重點在於提升資料整理的彈性，新增了「控制台」分頁以取代原有的簡易設定，並引入了強大的「專案合併」與「組別對應」功能，讓使用者能更靈活地歸納 Google Sheet 中不統一的資料。同時全面優化了互動體驗，移除了不穩定的原生彈窗。

✨ 新增功能 (New Features)

1. 控制台 (Control Panel)

全新分頁: 在導覽列新增「控制台」分頁，集中管理所有全局設定。

全局設定存儲: 設定值（如合併規則）現在會獨立於日報資料儲存，不會因切換日期而消失。

2. 專案動態合併 (Dynamic Project Merging)

視覺化合併介面: 在「總覽報表」下方的圓餅圖區塊，新增「合併設定」按鈕。

勾選合併: 點擊後可勾選多個分散的專案（如 "App維護", "App開發"），將其合併為單一項目（如 "App專案"）進行統計。

自訂名稱: 透過自訂模態視窗輸入合併後的顯示名稱。

規則管理: 已建立的合併規則會顯示在「控制台」中，可隨時查看或刪除（解除合併）。

3. 來源彈性設定 (Group Flexibility)

組別自動對應: 解決 Google Sheet 中填寫不規範的問題（例如有人填「網頁組」、有人填「網頁」）。

預設規則: 系統內建常用的合併規則：

品檢 ← 品檢組, 品檢

技術 ← 技術, 技術組

網頁 ← 網頁組, 網頁

客服組 ← 客服組, 【客服組】

自訂規則: 允許在控制台新增或刪除自訂的組別對應規則。

🎨 介面與體驗優化 (UI/UX Improvements)

自訂模態視窗 (Custom Modals):

全面移除瀏覽器原生的 alert, prompt, confirm。

改用美觀的 HTML/CSS 模態視窗（Modal），包含「合併名稱輸入」與「刪除確認」，確保在所有瀏覽器與嵌入式環境下皆能穩定運作。

列表樣式微調:

專案標籤: 字體縮小並淡化，減少視覺干擾。

議題 ID: 字體放大並加粗，提升閱讀辨識度。

圓餅圖表:

整合 Chart.js 顯示專案工時佔比。

右側列表顯示詳細數據（工時、百分比），並支援與圖表顏色對應。

導覽列簡化: 移除右上角冗餘的齒輪圖示，功能完全整合至分頁選單。

🛠️ 技術調整 (Technical Changes)

防呆機制: 優化圖表渲染邏輯，當圖表容器處於隱藏狀態時自動暫停重繪，避免 JS 錯誤與資源浪費。

資料結構更新:

新增 globalSettings 物件結構，包含 projectMerges 與 groupMerges。

資料讀取流程中加入 cleanGroupName 動態對應邏輯。

備註: 此版本相容舊有的日報資料結構（daily_reports_db_v6_gs_clean），設定檔則儲存於 daily_reports_settings_v1。
